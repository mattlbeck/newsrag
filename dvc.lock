schema: '2.0'
stages:
  download_feeds:
    cmd: python exp/download_feeds.py
    deps:
    - path: exp/download_feeds.py
      hash: md5
      md5: e2c3e4f13bf118a88ea631f155b26c92
      size: 575
    outs:
    - path: data/documents.jsonl
      hash: md5
      md5: 7ee92420cbd3291a8e4d6f5b22d8660d
      size: 851657
    - path: data/download_feeds.json
      hash: md5
      md5: 084e84d82d619b07ce4734865bb40b1b
      size: 25
  index_documents:
    cmd: python exp/index_documents.py
    deps:
    - path: data/documents.jsonl
      hash: md5
      md5: 7ee92420cbd3291a8e4d6f5b22d8660d
      size: 851657
    - path: exp/index_documents.py
      hash: md5
      md5: 2327c774a08e68df25bc341f8f54475f
      size: 1297
    outs:
    - path: data/document_store.json
      hash: md5
      md5: bb05d325246fc3f99c308e534fec63eb
      size: 48201233
    - path: data/index_documents.json
      hash: md5
      md5: 56d91907bb0a16e34ef9969aa9decb78
      size: 50
  model_topics:
    cmd: python exp/model_topics.py
    deps:
    - path: data/document_store.json
      hash: md5
      md5: bb05d325246fc3f99c308e534fec63eb
      size: 48201233
    - path: exp/model_topics.py
      hash: md5
      md5: dae925697e60ff900453ca8b474c68a1
      size: 2457
    params:
      params.yaml:
        model_topics:
          days: 2
          reps: 10
          umap:
            n_neighbors: 50
            n_components: 5
            metric: euclidean
          hdbscan:
            min_cluster_size: 15
    outs:
    - path: data/model_topics.json
      hash: md5
      md5: 5953425e26c60c9e4561be20370b3ce1
      size: 202
