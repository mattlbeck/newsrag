schema: '2.0'
stages:
  download_feeds:
    cmd: python exp/download_feeds.py
    deps:
    - path: exp/download_feeds.py
      hash: md5
      md5: e8dc5fea451b98c90a331f0876fd13a1
      size: 901
    outs:
    - path: data/documents.jsonl
      hash: md5
      md5: 635499893c22288d8f70c0bb5d1edd0a
      size: 970156
    - path: data/download_feeds.json
      hash: md5
      md5: ad045117f23e36dc324fb03030bacb18
      size: 25
  index_documents:
    cmd: python exp/index_documents.py
    deps:
    - path: data/documents.jsonl
      hash: md5
      md5: 635499893c22288d8f70c0bb5d1edd0a
      size: 970156
    - path: exp/index_documents.py
      hash: md5
      md5: 2327c774a08e68df25bc341f8f54475f
      size: 1297
    outs:
    - path: data/document_store.json
      hash: md5
      md5: e93a49ba7ed9f036e44eef7c5debc4af
      size: 53687753
    - path: data/index_documents.json
      hash: md5
      md5: 4148ba39bc8ffe10dd73e3d14ac3b793
      size: 50
  model_topics:
    cmd: python exp/model_topics.py
    deps:
    - path: data/document_store.json
      hash: md5
      md5: e93a49ba7ed9f036e44eef7c5debc4af
      size: 53687753
    - path: exp/model_topics.py
      hash: md5
      md5: 8847d8f357b0b61ef10750d45cb78afe
      size: 2880
    params:
      params.yaml:
        model_topics:
          days: 1
          reps: 31
          topic_merge_delta: 0.1
          umap:
            n_neighbors: 50
            min_dist: 0.1
            n_components: 5
            metric: euclidean
          hdbscan:
            min_cluster_size: 15
            min_samples:
            cluster_selection_epsilon: 0.0
            alpha: 1.0
    outs:
    - path: data/model_topics.json
      hash: md5
      md5: a59e12ba852caa46c29564e91f2a1568
      size: 251
