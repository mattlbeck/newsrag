schema: '2.0'
stages:
  download_feeds:
    cmd: python exp/download_feeds.py
    deps:
    - path: exp/download_feeds.py
      hash: md5
      md5: f5f030fe47d18f0b52df97a741d30079
      size: 808
    outs:
    - path: data/documents.jsonl
      hash: md5
      md5: 20ebf8f80e269dea5b643ece0053d925
      size: 1005449
    - path: data/download_feeds.json
      hash: md5
      md5: 6662f85c6ae3de780b81742fc5da3d0d
      size: 25
  index_documents:
    cmd: python exp/index_documents.py
    deps:
    - path: data/documents.jsonl
      hash: md5
      md5: 20ebf8f80e269dea5b643ece0053d925
      size: 1005449
    - path: exp/index_documents.py
      hash: md5
      md5: 2327c774a08e68df25bc341f8f54475f
      size: 1297
    outs:
    - path: data/document_store.json
      hash: md5
      md5: 6c6c8ddadf73913cbf31f1399c9b3113
      size: 54589897
    - path: data/index_documents.json
      hash: md5
      md5: b0220109a1a4276c6cdfb953b79621cc
      size: 50
  model_topics:
    cmd: python exp/model_topics.py
    deps:
    - path: data/document_store.json
      hash: md5
      md5: 6c6c8ddadf73913cbf31f1399c9b3113
      size: 54589897
    - path: exp/model_topics.py
      hash: md5
      md5: ebd2fe05ecfa72d904e52841d9ed3241
      size: 2675
    params:
      params.yaml:
        model_topics:
          days: 1
          reps: 31
          umap:
            n_neighbors: 50
            min_dist: 0.1
            n_components: 5
            metric: euclidean
          hdbscan:
            min_cluster_size: 15
            min_samples:
            cluster_selection_epsilon: 0.0
            alpha: 1.0
    outs:
    - path: data/model_topics.json
      hash: md5
      md5: 302033876cf90d6576591a47f320442a
      size: 225
